"use strict";(self["webpackChunkpdf_image_web"]=self["webpackChunkpdf_image_web"]||[]).push([[750],{1317:function(e,l,a){a.d(l,{A:function(){return F}});var t=a(641),u=a(953),r=a(33),n=a(163),o=a(8548),d=a(7196),i=a(1322);const s={class:"image-restore"},c={class:"card-header"},p={class:"image-preview"},f=["src"],k={key:0,class:"result-section"},v={class:"result-info"};var b={__name:"ImageRestore",setup(e){const l=(0,u.KR)(),a=(0,u.KR)(!1),b=(0,u.KR)(null),g=(0,u.KR)(""),_=(0,u.KR)(null),F=(0,u.Kh)({repairType:"auto",quality:"high"}),m=async e=>{const a=(0,i.nJ)(e.raw,"IMAGE");if(!a.valid)return n.nk.error(a.errors[0]),void l.value.clearFiles();b.value=e.raw;try{g.value=await(0,i.oz)(e.raw)}catch(t){console.error("图片预览失败:",t)}},h=e=>{const l=(0,i.nJ)(e,"IMAGE");return l.valid||n.nk.error(l.errors[0]),!1},y=async()=>{if(b.value){a.value=!0;try{const e=new FormData;e.append("file",b.value),e.append("repairType",F.repairType),e.append("quality",F.quality);const l=await d.CL.restoreImage(e);_.value=l,n.nk.success("旧照修复成功")}catch(e){console.error("旧照修复失败:",e)}finally{a.value=!1}}else n.nk.warning("请先选择图片文件")},w=()=>{if(_.value?.data?.downloadUrl){const e=document.createElement("a");e.href=_.value.data.downloadUrl,e.download=_.value.data.restoredFile,e.click()}},L=()=>{F.repairType="auto",F.quality="high",b.value=null,g.value="",_.value=null,l.value?.clearFiles()};return(e,n)=>{const d=(0,t.g2)("el-icon"),i=(0,t.g2)("el-upload"),W=(0,t.g2)("el-form-item"),R=(0,t.g2)("el-radio"),I=(0,t.g2)("el-radio-group"),M=(0,t.g2)("el-button"),C=(0,t.g2)("el-form"),E=(0,t.g2)("el-divider"),x=(0,t.g2)("el-alert"),A=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",s,[(0,t.bF)(A,{class:"box-card"},{header:(0,t.k6)(()=>[(0,t.Lk)("div",c,[n[2]||(n[2]=(0,t.Lk)("span",null,"旧照修复",-1)),(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,u.R1)(o.Magic))]),_:1})])]),default:(0,t.k6)(()=>[(0,t.bF)(C,{model:F,"label-width":"120px"},{default:(0,t.k6)(()=>[(0,t.bF)(W,{label:"选择图片文件",required:""},{default:(0,t.k6)(()=>[(0,t.bF)(i,{ref_key:"uploadRef",ref:l,"auto-upload":!1,limit:1,"on-change":m,"before-upload":h,accept:".jpg,.jpeg,.png,.bmp,.tiff",drag:""},{tip:(0,t.k6)(()=>[...n[3]||(n[3]=[(0,t.Lk)("div",{class:"el-upload__tip"}," 支持JPG、PNG、BMP、TIFF格式，且不超过100MB ",-1)])]),default:(0,t.k6)(()=>[(0,t.bF)(d,{class:"el-icon--upload"},{default:(0,t.k6)(()=>[(0,t.bF)((0,u.R1)(o.UploadFilled))]),_:1}),n[4]||(n[4]=(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)(" 将图片文件拖到此处，或"),(0,t.Lk)("em",null,"点击上传")],-1))]),_:1},512)]),_:1}),g.value?((0,t.uX)(),(0,t.Wv)(W,{key:0,label:"图片预览"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",p,[(0,t.Lk)("img",{src:g.value,alt:"预览图片"},null,8,f)])]),_:1})):(0,t.Q3)("",!0),(0,t.bF)(W,{label:"修复类型"},{default:(0,t.k6)(()=>[(0,t.bF)(I,{modelValue:F.repairType,"onUpdate:modelValue":n[0]||(n[0]=e=>F.repairType=e)},{default:(0,t.k6)(()=>[(0,t.bF)(R,{label:"auto"},{default:(0,t.k6)(()=>[...n[5]||(n[5]=[(0,t.eW)("自动修复",-1)])]),_:1}),(0,t.bF)(R,{label:"colorize"},{default:(0,t.k6)(()=>[...n[6]||(n[6]=[(0,t.eW)("上色修复",-1)])]),_:1}),(0,t.bF)(R,{label:"denoise"},{default:(0,t.k6)(()=>[...n[7]||(n[7]=[(0,t.eW)("降噪修复",-1)])]),_:1}),(0,t.bF)(R,{label:"upscale"},{default:(0,t.k6)(()=>[...n[8]||(n[8]=[(0,t.eW)("超分辨率",-1)])]),_:1})]),_:1},8,["modelValue"]),n[9]||(n[9]=(0,t.Lk)("div",{class:"form-tip"}," 选择修复类型，自动修复会综合多种算法进行智能修复 ",-1))]),_:1}),(0,t.bF)(W,{label:"修复质量"},{default:(0,t.k6)(()=>[(0,t.bF)(I,{modelValue:F.quality,"onUpdate:modelValue":n[1]||(n[1]=e=>F.quality=e)},{default:(0,t.k6)(()=>[(0,t.bF)(R,{label:"standard"},{default:(0,t.k6)(()=>[...n[10]||(n[10]=[(0,t.eW)("标准",-1)])]),_:1}),(0,t.bF)(R,{label:"high"},{default:(0,t.k6)(()=>[...n[11]||(n[11]=[(0,t.eW)("高质量",-1)])]),_:1}),(0,t.bF)(R,{label:"ultra"},{default:(0,t.k6)(()=>[...n[12]||(n[12]=[(0,t.eW)("超高质量",-1)])]),_:1})]),_:1},8,["modelValue"]),n[13]||(n[13]=(0,t.Lk)("div",{class:"form-tip"}," 选择修复质量，质量越高效果越好但处理时间越长 ",-1))]),_:1}),(0,t.bF)(W,null,{default:(0,t.k6)(()=>[(0,t.bF)(M,{type:"primary",loading:a.value,disabled:!b.value,onClick:y},{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)(a.value?"修复中...":"开始修复"),1)]),_:1},8,["loading","disabled"]),(0,t.bF)(M,{onClick:L},{default:(0,t.k6)(()=>[...n[14]||(n[14]=[(0,t.eW)("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),_.value?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.bF)(E,null,{default:(0,t.k6)(()=>[...n[15]||(n[15]=[(0,t.eW)("修复结果",-1)])]),_:1}),(0,t.bF)(x,{title:_.value.msg,type:"success",closable:!1,"show-icon":""},null,8,["title"]),(0,t.Lk)("div",v,[(0,t.Lk)("p",null,[n[16]||(n[16]=(0,t.Lk)("strong",null,"任务ID:",-1)),(0,t.eW)(" "+(0,r.v_)(_.value.data.taskId),1)]),(0,t.Lk)("p",null,[n[17]||(n[17]=(0,t.Lk)("strong",null,"修复文件:",-1)),(0,t.eW)(" "+(0,r.v_)(_.value.data.restoredFile),1)]),(0,t.Lk)("p",null,[n[18]||(n[18]=(0,t.Lk)("strong",null,"原始尺寸:",-1)),(0,t.eW)(" "+(0,r.v_)(_.value.data.originalSize),1)]),(0,t.Lk)("p",null,[n[19]||(n[19]=(0,t.Lk)("strong",null,"修复后尺寸:",-1)),(0,t.eW)(" "+(0,r.v_)(_.value.data.restoredSize),1)]),(0,t.bF)(M,{type:"success",onClick:w},{default:(0,t.k6)(()=>[(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,u.R1)(o.Download))]),_:1}),n[20]||(n[20]=(0,t.eW)(" 下载结果 ",-1))]),_:1})])])):(0,t.Q3)("",!0)]),_:1})])}}},g=a(6262);const _=(0,g.A)(b,[["__scopeId","data-v-2ec46122"]]);var F=_},1322:function(e,l,a){function t(e){if(0===e)return"0 B";const l=1024,a=["B","KB","MB","GB"],t=Math.floor(Math.log(e)/Math.log(l));return parseFloat((e/Math.pow(l,t)).toFixed(2))+" "+a[t]}function u(e,l){const a="."+e.name.split(".").pop().toLowerCase();return l.includes(a)}function r(e,l=104857600){return e.size<=l}function n(e){return new Promise((l,a)=>{const t=new FileReader;t.onload=e=>l(e.target.result),t.onerror=a,t.readAsDataURL(e)})}a.d(l,{nJ:function(){return d},oz:function(){return n},v7:function(){return t}});const o={PDF:[".pdf"],IMAGE:[".jpg",".jpeg",".png",".bmp",".tiff"],WORD:[".doc",".docx"],EXCEL:[".xls",".xlsx"],POWERPOINT:[".ppt",".pptx"]};function d(e,l){const a=[];return u(e,o[l])||a.push(`文件类型不支持，请上传${o[l].join("、")}格式的文件`),r(e)||a.push("文件大小不能超过100MB"),{valid:0===a.length,errors:a}}},9750:function(e,l,a){a.r(l),a.d(l,{default:function(){return i}});var t=a(641),u=a(1317);const r={class:"image-restore-page"};var n={__name:"ImageRestore",setup(e){return(e,l)=>((0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(u.A)]))}},o=a(6262);const d=(0,o.A)(n,[["__scopeId","data-v-7c655787"]]);var i=d}}]);
//# sourceMappingURL=750.9e7b1430.js.map