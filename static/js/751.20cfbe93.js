"use strict";(self["webpackChunkpdf_image_web"]=self["webpackChunkpdf_image_web"]||[]).push([[751],{1322:function(e,l,a){function t(e){if(0===e)return"0 B";const l=1024,a=["B","KB","MB","GB"],t=Math.floor(Math.log(e)/Math.log(l));return parseFloat((e/Math.pow(l,t)).toFixed(2))+" "+a[t]}function u(e,l){const a="."+e.name.split(".").pop().toLowerCase();return l.includes(a)}function n(e,l=104857600){return e.size<=l}a.d(l,{nJ:function(){return d},v7:function(){return t}});const r={PDF:[".pdf"],IMAGE:[".jpg",".jpeg",".png",".bmp",".tiff"],WORD:[".doc",".docx"],EXCEL:[".xls",".xlsx"],POWERPOINT:[".ppt",".pptx"]};function d(e,l){const a=[];return u(e,r[l])||a.push(`文件类型不支持，请上传${r[l].join("、")}格式的文件`),n(e)||a.push("文件大小不能超过100MB"),{valid:0===a.length,errors:a}}},6132:function(e,l,a){a.r(l),a.d(l,{default:function(){return L}});var t=a(641),u=a(953),n=a(33),r=a(163),d=a(8548),o=a(7196),s=a(1322),i=a(784);const c={class:"pdf-merge"},p={class:"card-header"},f={key:0,class:"file-list"},k={key:1,class:"result-section"},v={class:"result-info"};var m={__name:"PdfMerge",setup(e){const l=(0,u.KR)(),a=(0,u.KR)(!1),m=(0,u.KR)([]),F=(0,u.KR)(null),b=(0,u.Kh)({mergeOrder:"",outputFileName:"merged.pdf"}),g=(e,a)=>{const t=(0,s.nJ)(e.raw,"PDF");if(!t.valid)return r.nk.error(t.errors[0]),void l.value.clearFiles();m.value=a.map(e=>({name:e.name,size:(0,s.v7)(e.size),raw:e.raw}))},_=(e,l)=>{m.value=l.map(e=>({name:e.name,size:(0,s.v7)(e.size),raw:e.raw}))},h=e=>{m.value.splice(e,1),l.value.clearFiles(),m.value.forEach(e=>{l.value.handleStart(e.raw)})},w=e=>{const l=(0,s.nJ)(e,"PDF");return l.valid||r.nk.error(l.errors[0]),!1},L=async()=>{if(m.value.length<2)r.nk.warning("至少需要选择2个PDF文件才能合并");else{a.value=!0;try{const e=new FormData;m.value.forEach(l=>{e.append("files",l.raw)}),e.append("mergeOrder",b.mergeOrder),e.append("outputFileName",b.outputFileName);const l=await o.DC.mergePdfs(e);F.value=l,r.nk.success("PDF合并成功")}catch(e){console.error("PDF合并失败:",e)}finally{a.value=!1}}},D=()=>{if(F.value?.data?.downloadUrl)try{const e=F.value.data.mergedFile||"merged.pdf";(0,i.downloadFile)(F.value.data.downloadUrl,e),r.nk.success("下载已开始")}catch(e){console.error("下载失败:",e),r.nk.error("下载失败，请重试")}else r.nk.warning("没有可下载的文件")},P=()=>{b.mergeOrder="",b.outputFileName="merged.pdf",m.value=[],F.value=null,l.value?.clearFiles()};return(e,r)=>{const o=(0,t.g2)("el-icon"),s=(0,t.g2)("el-upload"),i=(0,t.g2)("el-form-item"),C=(0,t.g2)("el-input"),y=(0,t.g2)("el-button"),W=(0,t.g2)("el-form"),x=(0,t.g2)("el-divider"),E=(0,t.g2)("el-table-column"),M=(0,t.g2)("el-table"),R=(0,t.g2)("el-alert"),O=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",c,[(0,t.bF)(O,{class:"box-card"},{header:(0,t.k6)(()=>[(0,t.Lk)("div",p,[r[2]||(r[2]=(0,t.Lk)("span",null,"PDF合并",-1)),(0,t.bF)(o,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,u.R1)(d.DocumentCopy))]),_:1})])]),default:(0,t.k6)(()=>[(0,t.bF)(W,{model:b,"label-width":"120px"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{label:"选择PDF文件",required:""},{default:(0,t.k6)(()=>[(0,t.bF)(s,{ref_key:"uploadRef",ref:l,"auto-upload":!1,limit:10,"on-change":g,"on-remove":_,"before-upload":w,accept:".pdf",multiple:"",drag:""},{tip:(0,t.k6)(()=>[...r[3]||(r[3]=[(0,t.Lk)("div",{class:"el-upload__tip"}," 可以上传多个PDF文件，每个文件不超过100MB ",-1)])]),default:(0,t.k6)(()=>[(0,t.bF)(o,{class:"el-icon--upload"},{default:(0,t.k6)(()=>[(0,t.bF)((0,u.R1)(d.UploadFilled))]),_:1}),r[4]||(r[4]=(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)(" 将PDF文件拖到此处，或"),(0,t.Lk)("em",null,"点击上传")],-1))]),_:1},512)]),_:1}),(0,t.bF)(i,{label:"合并顺序"},{default:(0,t.k6)(()=>[(0,t.bF)(C,{modelValue:b.mergeOrder,"onUpdate:modelValue":r[0]||(r[0]=e=>b.mergeOrder=e),placeholder:"合并顺序，默认为上传顺序",clearable:""},null,8,["modelValue"]),r[5]||(r[5]=(0,t.Lk)("div",{class:"form-tip"}," 可以指定文件合并顺序，不填则按上传顺序合并 ",-1))]),_:1}),(0,t.bF)(i,{label:"输出文件名"},{default:(0,t.k6)(()=>[(0,t.bF)(C,{modelValue:b.outputFileName,"onUpdate:modelValue":r[1]||(r[1]=e=>b.outputFileName=e),placeholder:"输出文件名，默认为merged.pdf",clearable:""},null,8,["modelValue"])]),_:1}),(0,t.bF)(i,null,{default:(0,t.k6)(()=>[(0,t.bF)(y,{type:"primary",loading:a.value,disabled:m.value.length<2,onClick:L},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(a.value?"处理中...":"开始合并"),1)]),_:1},8,["loading","disabled"]),(0,t.bF)(y,{onClick:P},{default:(0,t.k6)(()=>[...r[6]||(r[6]=[(0,t.eW)("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),m.value.length>0?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.bF)(x,null,{default:(0,t.k6)(()=>[...r[7]||(r[7]=[(0,t.eW)("已选择的文件",-1)])]),_:1}),(0,t.bF)(M,{data:m.value,style:{width:"100%"}},{default:(0,t.k6)(()=>[(0,t.bF)(E,{prop:"name",label:"文件名"}),(0,t.bF)(E,{prop:"size",label:"文件大小",width:"120"}),(0,t.bF)(E,{label:"操作",width:"100"},{default:(0,t.k6)(e=>[(0,t.bF)(y,{type:"danger",size:"small",onClick:l=>h(e.$index)},{default:(0,t.k6)(()=>[...r[8]||(r[8]=[(0,t.eW)(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(0,t.Q3)("",!0),F.value?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.bF)(x,null,{default:(0,t.k6)(()=>[...r[9]||(r[9]=[(0,t.eW)("处理结果",-1)])]),_:1}),(0,t.bF)(R,{title:F.value.msg,type:"success",closable:!1,"show-icon":""},null,8,["title"]),(0,t.Lk)("div",v,[(0,t.Lk)("p",null,[r[10]||(r[10]=(0,t.Lk)("strong",null,"任务ID:",-1)),(0,t.eW)(" "+(0,n.v_)(F.value.data.taskId),1)]),(0,t.Lk)("p",null,[r[11]||(r[11]=(0,t.Lk)("strong",null,"合并文件:",-1)),(0,t.eW)(" "+(0,n.v_)(F.value.data.mergedFile),1)]),(0,t.Lk)("p",null,[r[12]||(r[12]=(0,t.Lk)("strong",null,"文件大小:",-1)),(0,t.eW)(" "+(0,n.v_)(F.value.data.fileSize),1)]),(0,t.bF)(y,{type:"success",onClick:D},{default:(0,t.k6)(()=>[(0,t.bF)(o,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,u.R1)(d.Download))]),_:1}),r[13]||(r[13]=(0,t.eW)(" 下载结果 ",-1))]),_:1})])])):(0,t.Q3)("",!0)]),_:1})])}}},F=a(6262);const b=(0,F.A)(m,[["__scopeId","data-v-4a12742b"]]);var g=b;const _={class:"pdf-merge-page"};var h={__name:"PdfMerge",setup(e){return(e,l)=>((0,t.uX)(),(0,t.CE)("div",_,[(0,t.bF)(g),l[0]||(l[0]=(0,t.Lk)("section",{class:"info-block"},[(0,t.Lk)("h2",null,"功能说明"),(0,t.Lk)("p",null,"将多个PDF文件按照顺序合并为一个完整文档，支持拖拽排序与批量上传。"),(0,t.Lk)("h3",null,"使用案例"),(0,t.Lk)("ul",null,[(0,t.Lk)("li",null,"把多份发票PDF合并成一份用于报销归档。"),(0,t.Lk)("li",null,"将多章节的文档合并为最终版电子书。"),(0,t.Lk)("li",null,"把多次扫描的PDF拼接成连续文档。")])],-1))]))}};const w=(0,F.A)(h,[["__scopeId","data-v-3dd42538"]]);var L=w}}]);
//# sourceMappingURL=751.20cfbe93.js.map