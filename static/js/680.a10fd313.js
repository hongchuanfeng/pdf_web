"use strict";(self["webpackChunkpdf_image_web"]=self["webpackChunkpdf_image_web"]||[]).push([[680],{1322:function(e,l,a){function t(e){if(0===e)return"0 B";const l=1024,a=["B","KB","MB","GB"],t=Math.floor(Math.log(e)/Math.log(l));return parseFloat((e/Math.pow(l,t)).toFixed(2))+" "+a[t]}function r(e,l){const a="."+e.name.split(".").pop().toLowerCase();return l.includes(a)}function n(e,l=104857600){return e.size<=l}a.d(l,{nJ:function(){return o},v7:function(){return t}});const u={PDF:[".pdf"],IMAGE:[".jpg",".jpeg",".png",".bmp",".tiff"],WORD:[".doc",".docx"],EXCEL:[".xls",".xlsx"],POWERPOINT:[".ppt",".pptx"]};function o(e,l){const a=[];return r(e,u[l])||a.push(`文件类型不支持，请上传${u[l].join("、")}格式的文件`),n(e)||a.push("文件大小不能超过100MB"),{valid:0===a.length,errors:a}}},5680:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var t=a(641),r=a(953),n=a(33),u=a(163),o=a(8548),d=a(7196),i=a(784),s=a(1322);const c={class:"pdf-merge"},p={class:"card-header"},f={key:0,class:"file-list"},m={key:1,class:"result-section"},g={class:"result-info"};var k={__name:"PdfMerge",setup(e){const l=(0,r.KR)(),a=(0,r.KR)(!1),k=(0,r.KR)([]),F=(0,r.KR)(null),v=(0,r.Kh)({mergeOrder:"",outputFileName:"merged.pdf"}),b=(e,a)=>{const t=(0,s.nJ)(e.raw,"PDF");if(!t.valid)return u.nk.error(t.errors[0]),void l.value.clearFiles();k.value=a.map(e=>({name:e.name,size:(0,s.v7)(e.size),raw:e.raw}))},h=(e,l)=>{k.value=l.map(e=>({name:e.name,size:(0,s.v7)(e.size),raw:e.raw}))},_=e=>{k.value.splice(e,1),l.value.clearFiles(),k.value.forEach(e=>{l.value.handleStart(e.raw)})},w=e=>{const l=(0,s.nJ)(e,"PDF");return l.valid||u.nk.error(l.errors[0]),!1},D=async()=>{if(k.value.length<2)u.nk.warning("At least 2 PDF files are required for merging");else{a.value=!0;try{const e=new FormData;k.value.forEach(l=>{e.append("files",l.raw)}),e.append("mergeOrder",v.mergeOrder),e.append("outputFileName",v.outputFileName);const l=await d.DC.mergePdfs(e);F.value=l,u.nk.success("PDF merge successful")}catch(e){console.error("PDF merge failed:",e)}finally{a.value=!1}}},L=()=>{if(F.value?.data?.downloadUrl)try{const e=F.value.data.mergedFile||"merged.pdf";(0,i.downloadFile)(F.value.data.downloadUrl,e),u.nk.success("Download started")}catch(e){console.error("Download failed:",e),u.nk.error("Download failed, please try again")}else u.nk.warning("No file available for download")},P=()=>{v.mergeOrder="",v.outputFileName="merged.pdf",k.value=[],F.value=null,l.value?.clearFiles()};return(e,u)=>{const d=(0,t.g2)("el-icon"),i=(0,t.g2)("el-upload"),s=(0,t.g2)("el-form-item"),y=(0,t.g2)("el-input"),C=(0,t.g2)("el-button"),M=(0,t.g2)("el-form"),R=(0,t.g2)("el-divider"),O=(0,t.g2)("el-table-column"),W=(0,t.g2)("el-table"),x=(0,t.g2)("el-alert"),z=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",c,[(0,t.bF)(z,{class:"box-card"},{header:(0,t.k6)(()=>[(0,t.Lk)("div",p,[u[2]||(u[2]=(0,t.Lk)("span",null,"PDF Merge",-1)),(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,r.R1)(o.DocumentCopy))]),_:1})])]),default:(0,t.k6)(()=>[(0,t.bF)(M,{model:v,"label-width":"120px"},{default:(0,t.k6)(()=>[(0,t.bF)(s,{label:"Select PDF Files",required:""},{default:(0,t.k6)(()=>[(0,t.bF)(i,{ref_key:"uploadRef",ref:l,"auto-upload":!1,limit:10,"on-change":b,"on-remove":h,"before-upload":w,accept:".pdf",multiple:"",drag:""},{tip:(0,t.k6)(()=>[...u[3]||(u[3]=[(0,t.Lk)("div",{class:"el-upload__tip"}," You can upload multiple PDF files, max 100MB per file ",-1)])]),default:(0,t.k6)(()=>[(0,t.bF)(d,{class:"el-icon--upload"},{default:(0,t.k6)(()=>[(0,t.bF)((0,r.R1)(o.UploadFilled))]),_:1}),u[4]||(u[4]=(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)(" Drag PDF files here, or "),(0,t.Lk)("em",null,"click to upload")],-1))]),_:1},512)]),_:1}),(0,t.bF)(s,{label:"Merge Order"},{default:(0,t.k6)(()=>[(0,t.bF)(y,{modelValue:v.mergeOrder,"onUpdate:modelValue":u[0]||(u[0]=e=>v.mergeOrder=e),placeholder:"Merge order, default is upload order",clearable:""},null,8,["modelValue"]),u[5]||(u[5]=(0,t.Lk)("div",{class:"form-tip"}," You can specify file merge order, leave empty to merge by upload order ",-1))]),_:1}),(0,t.bF)(s,{label:"Output File Name"},{default:(0,t.k6)(()=>[(0,t.bF)(y,{modelValue:v.outputFileName,"onUpdate:modelValue":u[1]||(u[1]=e=>v.outputFileName=e),placeholder:"Output file name, default is merged.pdf",clearable:""},null,8,["modelValue"])]),_:1}),(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.bF)(C,{type:"primary",loading:a.value,disabled:k.value.length<2,onClick:D},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(a.value?"Processing...":"Start Merge"),1)]),_:1},8,["loading","disabled"]),(0,t.bF)(C,{onClick:P},{default:(0,t.k6)(()=>[...u[6]||(u[6]=[(0,t.eW)("Reset",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),k.value.length>0?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.bF)(R,null,{default:(0,t.k6)(()=>[...u[7]||(u[7]=[(0,t.eW)("Selected Files",-1)])]),_:1}),(0,t.bF)(W,{data:k.value,style:{width:"100%"}},{default:(0,t.k6)(()=>[(0,t.bF)(O,{prop:"name",label:"File Name"}),(0,t.bF)(O,{prop:"size",label:"File Size",width:"120"}),(0,t.bF)(O,{label:"Action",width:"100"},{default:(0,t.k6)(e=>[(0,t.bF)(C,{type:"danger",size:"small",onClick:l=>_(e.$index)},{default:(0,t.k6)(()=>[...u[8]||(u[8]=[(0,t.eW)(" Remove ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(0,t.Q3)("",!0),F.value?((0,t.uX)(),(0,t.CE)("div",m,[(0,t.bF)(R,null,{default:(0,t.k6)(()=>[...u[9]||(u[9]=[(0,t.eW)("Processing Results",-1)])]),_:1}),(0,t.bF)(x,{title:F.value.msg,type:"success",closable:!1,"show-icon":""},null,8,["title"]),(0,t.Lk)("div",g,[(0,t.Lk)("p",null,[u[10]||(u[10]=(0,t.Lk)("strong",null,"Task ID:",-1)),(0,t.eW)(" "+(0,n.v_)(F.value.data.taskId),1)]),(0,t.Lk)("p",null,[u[11]||(u[11]=(0,t.Lk)("strong",null,"Merged File:",-1)),(0,t.eW)(" "+(0,n.v_)(F.value.data.mergedFile),1)]),(0,t.Lk)("p",null,[u[12]||(u[12]=(0,t.Lk)("strong",null,"File Size:",-1)),(0,t.eW)(" "+(0,n.v_)(F.value.data.fileSize),1)]),(0,t.bF)(C,{type:"success",onClick:L},{default:(0,t.k6)(()=>[(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,r.R1)(o.Download))]),_:1}),u[13]||(u[13]=(0,t.eW)(" Download Result ",-1))]),_:1})])])):(0,t.Q3)("",!0)]),_:1}),u[14]||(u[14]=(0,t.Lk)("section",{class:"info-block"},[(0,t.Lk)("h2",null,"Feature Description"),(0,t.Lk)("p",null,"Merge multiple PDF files into a single document in order, with drag-and-drop sorting and batch upload supported."),(0,t.Lk)("h3",null,"Use Cases"),(0,t.Lk)("ul",null,[(0,t.Lk)("li",null,"Combine multiple invoice PDFs into one file for reimbursement filing."),(0,t.Lk)("li",null,"Merge multi-chapter documents into a final e-book."),(0,t.Lk)("li",null,"Concatenate multiple scanned PDFs into a continuous document.")])],-1))])}}},F=a(6262);const v=(0,F.A)(k,[["__scopeId","data-v-47eeb42a"]]);var b=v}}]);
//# sourceMappingURL=680.a10fd313.js.map