{"version":3,"file":"static/js/612.469ec691.js","mappings":"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","sources":["webpack://pdf-image-web/./src/utils/file.js","webpack://pdf-image-web/./src/views/en/PdfWatermark.vue","webpack://pdf-image-web/./src/views/en/PdfWatermark.vue?106a"],"sourcesContent":["/**\r\n * 文件处理工具类\r\n */\r\n\r\n// 文件大小格式化\r\nexport function formatFileSize(bytes) {\r\n  if (bytes === 0) return '0 B'\r\n  const k = 1024\r\n  const sizes = ['B', 'KB', 'MB', 'GB']\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\r\n}\r\n\r\n// 检查文件类型\r\nexport function checkFileType(file, allowedTypes) {\r\n  const fileExtension = '.' + file.name.split('.').pop().toLowerCase()\r\n  return allowedTypes.includes(fileExtension)\r\n}\r\n\r\n// 检查文件大小\r\nexport function checkFileSize(file, maxSize = 100 * 1024 * 1024) { // 默认100MB\r\n  return file.size <= maxSize\r\n}\r\n\r\n// 获取文件扩展名\r\nexport function getFileExtension(filename) {\r\n  return filename.split('.').pop().toLowerCase()\r\n}\r\n\r\n// 生成唯一文件名\r\nexport function generateUniqueFileName(originalName) {\r\n  const timestamp = Date.now()\r\n  const random = Math.random().toString(36).substring(2, 8)\r\n  const extension = getFileExtension(originalName)\r\n  return `${timestamp}_${random}.${extension}`\r\n}\r\n\r\n// 下载文件\r\nexport function downloadFile(blob, filename) {\r\n  const url = window.URL.createObjectURL(blob)\r\n  const link = document.createElement('a')\r\n  link.href = url\r\n  link.download = filename\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n  window.URL.revokeObjectURL(url)\r\n}\r\n\r\n// 预览图片\r\nexport function previewImage(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader()\r\n    reader.onload = e => resolve(e.target.result)\r\n    reader.onerror = reject\r\n    reader.readAsDataURL(file)\r\n  })\r\n}\r\n\r\n// 支持的文件类型\r\nexport const FILE_TYPES = {\r\n  PDF: ['.pdf'],\r\n  IMAGE: ['.jpg', '.jpeg', '.png', '.bmp', '.tiff'],\r\n  WORD: ['.doc', '.docx'],\r\n  EXCEL: ['.xls', '.xlsx'],\r\n  POWERPOINT: ['.ppt', '.pptx']\r\n}\r\n\r\n// 文件类型验证\r\nexport function validateFile(file, type) {\r\n  const errors = []\r\n  \r\n  if (!checkFileType(file, FILE_TYPES[type])) {\r\n    errors.push(`文件类型不支持，请上传${FILE_TYPES[type].join('、')}格式的文件`)\r\n  }\r\n  \r\n  if (!checkFileSize(file)) {\r\n    errors.push('文件大小不能超过100MB')\r\n  }\r\n  \r\n  return {\r\n    valid: errors.length === 0,\r\n    errors\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"pdf-watermark\">\r\n    <div class=\"watermark-container\">\r\n      <!-- PDF Preview Section -->\r\n      <div class=\"pdf-preview-section\">\r\n        <el-card class=\"preview-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>PDF Preview</span>\r\n              <div class=\"preview-controls\">\r\n                <el-button-group>\r\n                  <el-button \r\n                    :disabled=\"currentPage <= 1\" \r\n                    @click=\"prevPage\"\r\n                    size=\"small\"\r\n                  >\r\n                    Previous\r\n                  </el-button>\r\n                  <el-button size=\"small\">\r\n                    {{ currentPage }} / {{ totalPages }}\r\n                  </el-button>\r\n                  <el-button \r\n                    :disabled=\"currentPage >= totalPages\" \r\n                    @click=\"nextPage\"\r\n                    size=\"small\"\r\n                  >\r\n                    Next\r\n                  </el-button>\r\n                </el-button-group>\r\n                <el-button \r\n                  @click=\"resetZoom\" \r\n                  size=\"small\"\r\n                  style=\"margin-left: 10px;\"\r\n                >\r\n                  Reset Zoom\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          \r\n          <div class=\"pdf-upload-area\" v-if=\"!pdfDocument\">\r\n            <el-upload\r\n              ref=\"uploadRef\"\r\n              :auto-upload=\"false\"\r\n              :limit=\"1\"\r\n              :on-change=\"handleFileChange\"\r\n              :before-upload=\"beforeUpload\"\r\n              accept=\".pdf\"\r\n              drag\r\n              class=\"pdf-upload\"\r\n            >\r\n              <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\r\n              <div class=\"el-upload__text\">\r\n                Drag PDF file here, or <em>click to upload</em>\r\n              </div>\r\n              <template #tip>\r\n                <div class=\"el-upload__tip\">\r\n                  Only PDF files allowed, max 100MB\r\n                </div>\r\n              </template>\r\n            </el-upload>\r\n          </div>\r\n          \r\n          <div v-else class=\"pdf-viewer-container\">\r\n            <!-- PDF Preview Area -->\r\n            <div \r\n              ref=\"pdfViewer\" \r\n              class=\"pdf-viewer\"\r\n              @mousedown=\"handleMouseDown\"\r\n              @mousemove=\"handleMouseMove\"\r\n              @mouseup=\"handleMouseUp\"\r\n              @mouseleave=\"handleMouseUp\"\r\n            >\r\n              <canvas ref=\"pdfCanvas\" class=\"pdf-canvas\" v-if=\"pdfDocument\"></canvas>\r\n              \r\n              <!-- Watermark Preview Layer -->\r\n              <!-- Text Watermark Preview -->\r\n              <div \r\n                v-if=\"form.watermarkType === 'text' && form.watermarkText && pdfDocument\"\r\n                class=\"watermark-preview text-watermark\"\r\n                :style=\"watermarkStyle\"\r\n                @mousedown=\"startDrag\"\r\n              >\r\n                {{ form.watermarkText }}\r\n              </div>\r\n              \r\n              <!-- Image Watermark Preview -->\r\n              <div \r\n                v-if=\"form.watermarkType === 'image' && watermarkFile && pdfDocument\"\r\n                class=\"watermark-preview image-watermark\"\r\n                :style=\"imageWatermarkStyle\"\r\n                @mousedown=\"startDrag\"\r\n              >\r\n                <img \r\n                  :src=\"watermarkImageUrl\" \r\n                  :alt=\"'Watermark Image'\"\r\n                  class=\"watermark-image\"\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- Fallback Preview Hint -->\r\n            <div v-if=\"!pdfDocument\" class=\"pdf-placeholder\">\r\n              <el-icon size=\"48\"><Document /></el-icon>\r\n              <p>PDF preview loading...</p>\r\n              <p class=\"placeholder-tip\">If it takes too long to load, please refresh the page and try again</p>\r\n              <el-button @click=\"retryLoadPdf\" type=\"primary\" size=\"small\" style=\"margin-top: 10px;\">\r\n                Retry Load\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n\r\n      <!-- Watermark Settings Panel -->\r\n      <div class=\"watermark-settings-section\">\r\n        <el-card class=\"settings-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>Watermark Settings</span>\r\n              <el-icon><Edit /></el-icon>\r\n            </div>\r\n          </template>\r\n          \r\n          <el-form :model=\"form\" label-width=\"100px\" size=\"small\">\r\n            <el-form-item label=\"Watermark Type\" required>\r\n              <el-radio-group v-model=\"form.watermarkType\" @change=\"handleWatermarkTypeChange\">\r\n                <el-radio label=\"text\">Text Watermark</el-radio>\r\n                <el-radio label=\"image\">Image Watermark</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n\r\n            <!-- Text Watermark Settings -->\r\n            <template v-if=\"form.watermarkType === 'text'\">\r\n              <el-form-item label=\"Watermark Text\" required>\r\n                <el-input\r\n                  v-model=\"form.watermarkText\"\r\n                  placeholder=\"Enter watermark text\"\r\n                  clearable\r\n                />\r\n              </el-form-item>\r\n\r\n              <el-form-item label=\"Text Color\">\r\n                <el-color-picker v-model=\"form.textColor\" />\r\n                <span class=\"color-preview\" :style=\"{ backgroundColor: form.textColor }\"></span>\r\n              </el-form-item>\r\n\r\n              <el-form-item label=\"Font Size\">\r\n                <el-slider\r\n                  v-model=\"form.fontSize\"\r\n                  :min=\"12\"\r\n                  :max=\"120\"\r\n                  :step=\"2\"\r\n                  show-input\r\n                  :format-tooltip=\"formatFontSize\"\r\n                />\r\n              </el-form-item>\r\n\r\n              <el-form-item label=\"Text Angle\">\r\n                <el-slider\r\n                  v-model=\"form.rotation\"\r\n                  :min=\"0\"\r\n                  :max=\"360\"\r\n                  :step=\"15\"\r\n                  show-input\r\n                  :format-tooltip=\"formatRotation\"\r\n                />\r\n              </el-form-item>\r\n\r\n              <el-form-item label=\"Opacity\">\r\n                <el-slider\r\n                  v-model=\"form.opacity\"\r\n                  :min=\"0.1\"\r\n                  :max=\"1\"\r\n                  :step=\"0.1\"\r\n                  show-input\r\n                  :format-tooltip=\"formatOpacity\"\r\n                />\r\n              </el-form-item>\r\n            </template>\r\n\r\n            <!-- Image Watermark Settings -->\r\n            <template v-if=\"form.watermarkType === 'image'\">\r\n              <el-form-item label=\"Watermark Image\" required>\r\n                <el-upload\r\n                  ref=\"watermarkUploadRef\"\r\n                  :auto-upload=\"false\"\r\n                  :limit=\"1\"\r\n                  :on-change=\"handleWatermarkFileChange\"\r\n                  :before-upload=\"beforeWatermarkUpload\"\r\n                  accept=\".jpg,.jpeg,.png,.bmp,.tiff\"\r\n                  drag\r\n                >\r\n                  <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\r\n                  <div class=\"el-upload__text\">\r\n                    Drag watermark image here, or <em>click to upload</em>\r\n                  </div>\r\n                  <template #tip>\r\n                    <div class=\"el-upload__tip\">\r\n                      Supports JPG, PNG, BMP, TIFF format images\r\n                    </div>\r\n                  </template>\r\n                </el-upload>\r\n              </el-form-item>\r\n            </template>\r\n\r\n            <el-form-item>\r\n              <el-button\r\n                type=\"primary\"\r\n                :loading=\"loading\"\r\n                :disabled=\"!canSubmit\"\r\n                @click=\"handleSubmit\"\r\n                size=\"small\"\r\n              >\r\n                {{ loading ? 'Processing...' : 'Add Watermark' }}\r\n              </el-button>\r\n              <el-button @click=\"resetForm\" size=\"small\">Reset</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n\r\n          <!-- Results Display -->\r\n          <div v-if=\"result\" class=\"result-section\">\r\n            <el-divider>Processing Results</el-divider>\r\n            <el-alert\r\n              :title=\"result.msg\"\r\n              type=\"success\"\r\n              :closable=\"false\"\r\n              show-icon\r\n            />\r\n            <div class=\"result-info\">\r\n              <p><strong>Task ID:</strong> {{ result.data.taskId }}</p>\r\n              <p><strong>Processed File:</strong> {{ result.data.watermarkedFile }}</p>\r\n              <el-button type=\"success\" @click=\"downloadResult\" size=\"small\">\r\n                <el-icon><Download /></el-icon>\r\n                Download Result\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n\r\n    <section class=\"info-block\">\r\n      <h2>Feature Description</h2>\r\n      <p>Add text or image watermarks to PDFs with configurable position, opacity, rotation angle, and tiling/repeat options.</p>\r\n      <h3>Use Cases</h3>\r\n      <ul>\r\n        <li>Add \"Confidential\" watermarks to internal documents to prevent leakage.</li>\r\n        <li>Overlay company logo watermarks on contracts for ownership marking.</li>\r\n        <li>Batch watermark training materials with copyright statements.</li>\r\n      </ul>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, computed, onMounted, nextTick } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Edit, UploadFilled, Download, Document } from '@element-plus/icons-vue'\r\nimport { pdfApi } from '@/api'\r\nimport { validateFile, FILE_TYPES } from '@/utils/file'\r\nimport { downloadFile } from '@/utils/download'\r\n\r\n// Use CDN version of PDF.js to avoid compatibility issues\r\nlet pdfjsLib = null\r\n\r\n// Async load PDF.js\r\nconst loadPdfJs = async () => {\r\n  if (!pdfjsLib) {\r\n    // Check if PDF.js is already loaded\r\n    if (window.pdfjsLib) {\r\n      pdfjsLib = window.pdfjsLib\r\n      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js'\r\n      return pdfjsLib\r\n    }\r\n    \r\n    // Dynamically load PDF.js CDN version - use stable 2.11.338 version\r\n    const script = document.createElement('script')\r\n    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js'\r\n    script.async = true\r\n    \r\n    return new Promise((resolve, reject) => {\r\n      script.onload = () => {\r\n        pdfjsLib = window.pdfjsLib\r\n        // Set PDF.js worker\r\n        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js'\r\n        resolve(pdfjsLib)\r\n      }\r\n      script.onerror = (error) => {\r\n        console.error('PDF.js load failed:', error)\r\n        reject(error)\r\n      }\r\n      document.head.appendChild(script)\r\n    })\r\n  }\r\n  return pdfjsLib\r\n}\r\n\r\nconst uploadRef = ref()\r\nconst watermarkUploadRef = ref()\r\nconst pdfCanvas = ref()\r\nconst pdfViewer = ref()\r\nconst loading = ref(false)\r\nconst selectedFile = ref(null)\r\nconst watermarkFile = ref(null)\r\nconst watermarkImageUrl = ref('')\r\nconst result = ref(null)\r\n\r\n// PDF related state\r\nconst pdfDocument = ref(null)\r\nconst currentPage = ref(1)\r\nconst totalPages = ref(0)\r\nconst scale = ref(1.0)\r\nconst isDragging = ref(false)\r\nconst dragStart = ref({ x: 0, y: 0 })\r\nconst watermarkPosition = ref({ x: 50, y: 50 }) // Watermark position (percentage)\r\n\r\nconst form = reactive({\r\n  watermarkType: 'text',\r\n  watermarkText: '',\r\n  position: 'center',\r\n  opacity: 0.5,\r\n  textColor: '#FF0000',\r\n  fontSize: 48,\r\n  rotation: 0,\r\n  offsetX: 0,\r\n  offsetY: 0\r\n})\r\n\r\n// Calculate if can submit\r\nconst canSubmit = computed(() => {\r\n  if (!selectedFile.value) return false\r\n  if (form.watermarkType === 'text' && !form.watermarkText.trim()) return false\r\n  if (form.watermarkType === 'image' && !watermarkFile.value) return false\r\n  return true\r\n})\r\n\r\n// Watermark style computed property\r\nconst watermarkStyle = computed(() => {\r\n  if (form.watermarkType !== 'text' || !form.watermarkText) return {}\r\n  \r\n  return {\r\n    position: 'absolute',\r\n    left: `${watermarkPosition.value.x}%`,\r\n    top: `${watermarkPosition.value.y}%`,\r\n    transform: `translate(-50%, -50%) rotate(${form.rotation}deg)`,\r\n    color: form.textColor,\r\n    fontSize: `${form.fontSize}px`,\r\n    opacity: form.opacity,\r\n    pointerEvents: 'auto',\r\n    userSelect: 'none',\r\n    whiteSpace: 'nowrap',\r\n    zIndex: 10,\r\n    fontFamily: 'Arial, sans-serif',\r\n    fontWeight: 'bold',\r\n    textShadow: '1px 1px 2px rgba(0,0,0,0.3)',\r\n    cursor: 'move'\r\n  }\r\n})\r\n\r\n// Image watermark style computed property\r\nconst imageWatermarkStyle = computed(() => {\r\n  if (form.watermarkType !== 'image' || !watermarkFile.value) return {}\r\n  \r\n  return {\r\n    position: 'absolute',\r\n    left: `${watermarkPosition.value.x}%`,\r\n    top: `${watermarkPosition.value.y}%`,\r\n    transform: `translate(-50%, -50%) rotate(${form.rotation}deg)`,\r\n    opacity: form.opacity,\r\n    pointerEvents: 'auto',\r\n    userSelect: 'none',\r\n    zIndex: 10,\r\n    cursor: 'move',\r\n    maxWidth: '200px',\r\n    maxHeight: '200px'\r\n  }\r\n})\r\n\r\n// Watermark type change handling\r\nconst handleWatermarkTypeChange = () => {\r\n  form.watermarkText = ''\r\n  watermarkFile.value = null\r\n  watermarkImageUrl.value = ''\r\n  watermarkUploadRef.value?.clearFiles()\r\n}\r\n\r\n// File selection handling\r\nconst handleFileChange = async (file) => {\r\n  const validation = validateFile(file.raw, 'PDF')\r\n  if (!validation.valid) {\r\n    ElMessage.error(validation.errors[0])\r\n    uploadRef.value.clearFiles()\r\n    return\r\n  }\r\n  selectedFile.value = file.raw\r\n  await loadPdf(file.raw)\r\n}\r\n\r\n// Load PDF file\r\nconst loadPdf = async (file) => {\r\n  try {\r\n    // Ensure PDF.js is loaded\r\n    const pdfjs = await loadPdfJs()\r\n    \r\n    if (!pdfjs) {\r\n      throw new Error('PDF.js library load failed')\r\n    }\r\n    \r\n    const arrayBuffer = await file.arrayBuffer()\r\n    const pdf = await pdfjs.getDocument(arrayBuffer).promise\r\n    \r\n    pdfDocument.value = pdf\r\n    totalPages.value = pdf.numPages\r\n    currentPage.value = 1\r\n    \r\n    await renderPage(1)\r\n    ElMessage.success('PDF loaded successfully')\r\n  } catch (error) {\r\n    console.error('PDF load failed:', error)\r\n    if (error.message.includes('PDF.js library load failed')) {\r\n      ElMessage.error('PDF preview function temporarily unavailable, please try again later')\r\n    } else {\r\n      ElMessage.error('PDF load failed, please check file format')\r\n    }\r\n  }\r\n}\r\n\r\n// Render PDF page\r\nconst renderPage = async (pageNum) => {\r\n  if (!pdfDocument.value) return\r\n  \r\n  try {\r\n    const page = await pdfDocument.value.getPage(pageNum)\r\n    const canvas = pdfCanvas.value\r\n    const context = canvas.getContext('2d')\r\n    \r\n    // Calculate zoom ratio\r\n    const viewport = page.getViewport({ scale: scale.value })\r\n    canvas.height = viewport.height\r\n    canvas.width = viewport.width\r\n    \r\n    // Render page\r\n    const renderContext = {\r\n      canvasContext: context,\r\n      viewport: viewport\r\n    }\r\n    \r\n    await page.render(renderContext).promise\r\n  } catch (error) {\r\n    console.error('Page render failed:', error)\r\n    ElMessage.error('Page render failed')\r\n  }\r\n}\r\n\r\n// Previous page\r\nconst prevPage = async () => {\r\n  if (currentPage.value > 1) {\r\n    currentPage.value--\r\n    await renderPage(currentPage.value)\r\n  }\r\n}\r\n\r\n// Next page\r\nconst nextPage = async () => {\r\n  if (currentPage.value < totalPages.value) {\r\n    currentPage.value++\r\n    await renderPage(currentPage.value)\r\n  }\r\n}\r\n\r\n// Reset zoom\r\nconst resetZoom = async () => {\r\n  scale.value = 1.0\r\n  await renderPage(currentPage.value)\r\n}\r\n\r\n// Retry load PDF\r\nconst retryLoadPdf = async () => {\r\n  if (selectedFile.value) {\r\n    // Clear current state\r\n    pdfDocument.value = null\r\n    pdfjsLib = null\r\n    window.pdfjsLib = null\r\n    \r\n    // Clear loaded script\r\n    const existingScript = document.querySelector('script[src*=\"pdf.min.js\"]')\r\n    if (existingScript) {\r\n      existingScript.remove()\r\n    }\r\n    \r\n    // Reload\r\n    await loadPdf(selectedFile.value)\r\n  }\r\n}\r\n\r\n// Drag related methods\r\nconst startDrag = (event) => {\r\n  event.preventDefault()\r\n  isDragging.value = true\r\n  dragStart.value = {\r\n    x: event.clientX,\r\n    y: event.clientY\r\n  }\r\n  document.addEventListener('mousemove', handleDrag)\r\n  document.addEventListener('mouseup', stopDrag)\r\n}\r\n\r\nconst handleDrag = (event) => {\r\n  if (!isDragging.value) return\r\n  \r\n  const rect = pdfViewer.value.getBoundingClientRect()\r\n  const x = ((event.clientX - rect.left) / rect.width) * 100\r\n  const y = ((event.clientY - rect.top) / rect.height) * 100\r\n  \r\n  // Limit within PDF area\r\n  watermarkPosition.value = {\r\n    x: Math.max(0, Math.min(100, x)),\r\n    y: Math.max(0, Math.min(100, y))\r\n  }\r\n}\r\n\r\nconst stopDrag = () => {\r\n  isDragging.value = false\r\n  document.removeEventListener('mousemove', handleDrag)\r\n  document.removeEventListener('mouseup', stopDrag)\r\n}\r\n\r\n// Mouse event handling (for PDF canvas drag)\r\nconst handleMouseDown = (event) => {\r\n  if ((form.watermarkType === 'text' && form.watermarkText) || \r\n      (form.watermarkType === 'image' && watermarkFile.value)) {\r\n    startDrag(event)\r\n  }\r\n}\r\n\r\nconst handleMouseMove = (event) => {\r\n  if (isDragging.value) {\r\n    handleDrag(event)\r\n  }\r\n}\r\n\r\nconst handleMouseUp = () => {\r\n  stopDrag()\r\n}\r\n\r\n// Watermark file selection handling\r\nconst handleWatermarkFileChange = (file) => {\r\n  const validation = validateFile(file.raw, 'IMAGE')\r\n  if (!validation.valid) {\r\n    ElMessage.error(validation.errors[0])\r\n    watermarkUploadRef.value.clearFiles()\r\n    return\r\n  }\r\n  watermarkFile.value = file.raw\r\n  \r\n  // Create image preview URL\r\n  const reader = new FileReader()\r\n  reader.onload = (e) => {\r\n    watermarkImageUrl.value = e.target.result\r\n  }\r\n  reader.readAsDataURL(file.raw)\r\n}\r\n\r\n// Pre-upload validation\r\nconst beforeUpload = (file) => {\r\n  const validation = validateFile(file, 'PDF')\r\n  if (!validation.valid) {\r\n    ElMessage.error(validation.errors[0])\r\n    return false\r\n  }\r\n  return false // Prevent auto-upload\r\n}\r\n\r\n// Watermark file pre-upload validation\r\nconst beforeWatermarkUpload = (file) => {\r\n  const validation = validateFile(file, 'IMAGE')\r\n  if (!validation.valid) {\r\n    ElMessage.error(validation.errors[0])\r\n    return false\r\n  }\r\n  return false // Prevent auto-upload\r\n}\r\n\r\n// Opacity formatting\r\nconst formatOpacity = (value) => {\r\n  return `${Math.round(value * 100)}%`\r\n}\r\n\r\n// Font size formatting\r\nconst formatFontSize = (value) => {\r\n  return `${value}px`\r\n}\r\n\r\n// Angle formatting\r\nconst formatRotation = (value) => {\r\n  return `${value}°`\r\n}\r\n\r\n// Submit processing\r\nconst handleSubmit = async () => {\r\n  if (!canSubmit.value) {\r\n    ElMessage.warning('Please complete all required fields')\r\n    return\r\n  }\r\n\r\n  loading.value = true\r\n  try {\r\n    const formData = new FormData()\r\n    formData.append('file', selectedFile.value)\r\n    formData.append('watermarkType', form.watermarkType)\r\n    formData.append('opacity', form.opacity.toString())\r\n\r\n    if (form.watermarkType === 'text') {\r\n      formData.append('watermarkText', form.watermarkText)\r\n      formData.append('textColor', form.textColor)\r\n      formData.append('fontSize', form.fontSize.toString())\r\n      formData.append('rotation', form.rotation.toString())\r\n      \r\n      // Use drag position instead of preset position\r\n      formData.append('position', 'custom')\r\n      formData.append('offsetX', watermarkPosition.value.x.toString())\r\n      formData.append('offsetY', watermarkPosition.value.y.toString())\r\n    } else if (form.watermarkType === 'image' && watermarkFile.value) {\r\n      // Image watermark: add image file\r\n      formData.append('watermarkFile', watermarkFile.value)\r\n      formData.append('position', 'custom')\r\n      formData.append('offsetX', watermarkPosition.value.x.toString())\r\n      formData.append('offsetY', watermarkPosition.value.y.toString())\r\n      formData.append('rotation', form.rotation.toString())\r\n    }\r\n\r\n    const response = await pdfApi.addWatermark(formData)\r\n    result.value = response\r\n    ElMessage.success('PDF watermark added successfully')\r\n  } catch (error) {\r\n    console.error('PDF watermark add failed:', error)\r\n    ElMessage.error('PDF watermark add failed, please try again')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// Download result\r\nconst downloadResult = () => {\r\n  if (result.value?.data?.downloadUrl) {\r\n    try {\r\n      const filename = result.value.data.watermarkedFile || 'watermarked.pdf'\r\n      \r\n      // 使用统一的下载工具函数\r\n      downloadFile(result.value.data.downloadUrl, filename)\r\n      \r\n      ElMessage.success('Download started')\r\n    } catch (error) {\r\n      console.error('Download failed:', error)\r\n      ElMessage.error('Download failed, please try again')\r\n    }\r\n  } else {\r\n    ElMessage.warning('No file available for download')\r\n  }\r\n}\r\n\r\n// Reset form\r\nconst resetForm = () => {\r\n  form.watermarkType = 'text'\r\n  form.watermarkText = ''\r\n  form.position = 'center'\r\n  form.opacity = 0.5\r\n  form.textColor = '#FF0000'\r\n  form.fontSize = 48\r\n  form.rotation = 0\r\n  form.offsetX = 0\r\n  form.offsetY = 0\r\n  selectedFile.value = null\r\n  watermarkFile.value = null\r\n  watermarkImageUrl.value = ''\r\n  result.value = null\r\n  pdfDocument.value = null\r\n  currentPage.value = 1\r\n  totalPages.value = 0\r\n  watermarkPosition.value = { x: 50, y: 50 }\r\n  uploadRef.value?.clearFiles()\r\n  watermarkUploadRef.value?.clearFiles()\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.pdf-watermark {\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.watermark-container {\r\n  display: flex;\r\n  gap: 20px;\r\n  height: calc(100vh - 100px);\r\n}\r\n\r\n.pdf-preview-section {\r\n  flex: 2;\r\n  min-width: 0;\r\n}\r\n\r\n.watermark-settings-section {\r\n  flex: 1;\r\n  min-width: 300px;\r\n}\r\n\r\n.preview-card,\r\n.settings-card {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.preview-card .el-card__body {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0;\r\n}\r\n\r\n.settings-card .el-card__body {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n}\r\n\r\n.preview-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.pdf-upload-area {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px;\r\n}\r\n\r\n.pdf-upload {\r\n  width: 100%;\r\n}\r\n\r\n.pdf-viewer-container {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  overflow: auto;\r\n  background-color: #f5f5f5;\r\n  padding: 20px;\r\n}\r\n\r\n.pdf-viewer {\r\n  position: relative;\r\n  display: inline-block;\r\n  margin: 0 auto;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n  background-color: white;\r\n  cursor: grab;\r\n}\r\n\r\n.pdf-viewer:active {\r\n  cursor: grabbing;\r\n}\r\n\r\n.pdf-canvas {\r\n  display: block;\r\n  max-width: 100%;\r\n  height: auto;\r\n}\r\n\r\n.watermark-preview {\r\n  position: absolute;\r\n  pointer-events: auto;\r\n  cursor: move;\r\n  user-select: none;\r\n  z-index: 10;\r\n  border: 2px dashed #409eff;\r\n  border-radius: 4px;\r\n  background-color: rgba(255, 255, 255, 0.8);\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.watermark-preview:hover {\r\n  border-color: #66b1ff;\r\n  background-color: rgba(255, 255, 255, 0.9);\r\n}\r\n\r\n/* Text watermark style */\r\n.text-watermark {\r\n  padding: 4px 8px;\r\n}\r\n\r\n/* Image watermark style */\r\n.image-watermark {\r\n  padding: 2px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.watermark-image {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  object-fit: contain;\r\n  border-radius: 2px;\r\n}\r\n\r\n.result-section {\r\n  margin-top: 20px;\r\n}\r\n\r\n.result-info {\r\n  margin-top: 15px;\r\n  padding: 15px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 4px;\r\n}\r\n\r\n.result-info p {\r\n  margin: 8px 0;\r\n  font-size: 14px;\r\n}\r\n\r\n.color-preview {\r\n  display: inline-block;\r\n  width: 20px;\r\n  height: 20px;\r\n  margin-left: 10px;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  vertical-align: middle;\r\n}\r\n\r\n/* Responsive design */\r\n@media (max-width: 1200px) {\r\n  .watermark-container {\r\n    flex-direction: column;\r\n    height: auto;\r\n  }\r\n  \r\n  .pdf-preview-section,\r\n  .watermark-settings-section {\r\n    flex: none;\r\n  }\r\n  \r\n  .pdf-viewer-container {\r\n    height: 500px;\r\n  }\r\n}\r\n\r\n/* Scrollbar style */\r\n.pdf-viewer-container::-webkit-scrollbar {\r\n  width: 8px;\r\n  height: 8px;\r\n}\r\n\r\n.pdf-viewer-container::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n  border-radius: 4px;\r\n}\r\n\r\n.pdf-viewer-container::-webkit-scrollbar-thumb {\r\n  background: #c1c1c1;\r\n  border-radius: 4px;\r\n}\r\n\r\n.pdf-viewer-container::-webkit-scrollbar-thumb:hover {\r\n  background: #a8a8a8;\r\n}\r\n\r\n/* PDF placeholder style */\r\n.pdf-placeholder {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  color: #909399;\r\n  text-align: center;\r\n  padding: 40px;\r\n}\r\n\r\n.pdf-placeholder .el-icon {\r\n  margin-bottom: 16px;\r\n  color: #c0c4cc;\r\n}\r\n\r\n.pdf-placeholder p {\r\n  margin: 8px 0;\r\n  font-size: 14px;\r\n}\r\n\r\n.placeholder-tip {\r\n  font-size: 12px !important;\r\n  color: #c0c4cc !important;\r\n}\r\n\r\n.info-block {\r\n  margin: 16px auto 0;\r\n  padding: 16px;\r\n  border: 1px solid var(--el-card-border-color, #ebeef5);\r\n  background-color: var(--el-fill-color-blank, #fff);\r\n  border-radius: var(--el-border-radius-base, 4px);\r\n  box-sizing: border-box;\r\n  max-width: 1400px;\r\n}\r\n</style>","import script from \"./PdfWatermark.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PdfWatermark.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PdfWatermark.vue?vue&type=style&index=0&id=3569d2f2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3569d2f2\"]])\n\nexport default __exports__"],"names":["formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","checkFileType","file","allowedTypes","fileExtension","name","split","pop","toLowerCase","includes","checkFileSize","maxSize","size","FILE_TYPES","PDF","IMAGE","WORD","EXCEL","POWERPOINT","validateFile","type","errors","push","join","valid","length","pdfjsLib","loadPdfJs","async","window","GlobalWorkerOptions","workerSrc","script","document","createElement","src","Promise","resolve","reject","onload","onerror","error","console","head","appendChild","uploadRef","watermarkUploadRef","pdfCanvas","pdfViewer","loading","selectedFile","watermarkFile","watermarkImageUrl","result","pdfDocument","currentPage","totalPages","scale","isDragging","dragStart","x","y","watermarkPosition","form","watermarkType","watermarkText","position","opacity","textColor","fontSize","rotation","offsetX","offsetY","canSubmit","value","trim","watermarkStyle","left","top","transform","color","pointerEvents","userSelect","whiteSpace","zIndex","fontFamily","fontWeight","textShadow","cursor","imageWatermarkStyle","maxWidth","maxHeight","handleWatermarkTypeChange","clearFiles","handleFileChange","validation","raw","loadPdf","pdfjs","Error","arrayBuffer","pdf","getDocument","promise","numPages","renderPage","success","message","pageNum","page","getPage","canvas","context","getContext","viewport","getViewport","height","width","renderContext","canvasContext","render","prevPage","nextPage","resetZoom","retryLoadPdf","existingScript","querySelector","remove","startDrag","event","preventDefault","clientX","clientY","addEventListener","handleDrag","stopDrag","rect","getBoundingClientRect","max","min","removeEventListener","handleMouseDown","handleMouseMove","handleMouseUp","handleWatermarkFileChange","reader","FileReader","e","target","readAsDataURL","beforeUpload","beforeWatermarkUpload","formatOpacity","round","formatFontSize","formatRotation","handleSubmit","formData","FormData","append","toString","response","addWatermark","warning","downloadResult","data","downloadUrl","filename","watermarkedFile","download","downloadFile","resetForm","class","header","disabled","style","ref","alt","limit","accept","drag","tip","model","label","required","placeholder","clearable","step","title","msg","closable","taskId","__exports__"],"sourceRoot":""}