"use strict";(self["webpackChunkpdf_image_web"]=self["webpackChunkpdf_image_web"]||[]).push([[946],{4946:function(e,l,a){a.r(l),a.d(l,{default:function(){return g}});var t=a(641),d=a(953),n=a(33),o=a(163),u=a(8548),r=a(7196);const i={class:"markdown-to-pdf"},s={class:"card-header"},c={key:0,class:"result-section"},p={class:"result-info"};var b={__name:"MarkdownToPdf",setup(e){const l=(0,d.KR)(),a=(0,d.KR)(!1),b=(0,d.KR)(null),k=(0,d.KR)(null),m=(0,d.Kh)({theme:"default",pageSize:"A4",orientation:"portrait",margins:"36,36,36,36"}),f=e=>{const a=e.raw,t=/\.md$/i.test(a.name);if(!t)return o.nk.error("仅支持 .md 文件"),void l.value.clearFiles();b.value=a},v=e=>{const l=/\.md$/i.test(e.name);return l||o.nk.error("仅支持 .md 文件"),!1},F=async()=>{if(b.value){a.value=!0;try{const e=new FormData;e.append("file",b.value),e.append("theme",m.theme),e.append("pageSize",m.pageSize),e.append("orientation",m.orientation),e.append("margins",m.margins);const l=await r.DC.fromMarkdown(e);k.value=l,o.nk.success("转换成功")}catch(e){console.error(e)}finally{a.value=!1}}else o.nk.warning("请先选择Markdown文件")},_=()=>{if(k.value?.data?.downloadUrl){const e=document.createElement("a");e.href=k.value.data.downloadUrl,e.download=k.value.data.convertedFile||"converted.pdf",e.click()}},g=()=>{m.theme="default",m.pageSize="A4",m.orientation="portrait",m.margins="36,36,36,36",b.value=null,k.value=null,l.value?.clearFiles()};return(e,o)=>{const r=(0,t.g2)("el-icon"),w=(0,t.g2)("el-upload"),h=(0,t.g2)("el-form-item"),L=(0,t.g2)("el-option"),V=(0,t.g2)("el-select"),y=(0,t.g2)("el-input"),C=(0,t.g2)("el-button"),M=(0,t.g2)("el-form"),R=(0,t.g2)("el-divider"),D=(0,t.g2)("el-alert"),U=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(U,{class:"box-card"},{header:(0,t.k6)(()=>[(0,t.Lk)("div",s,[o[4]||(o[4]=(0,t.Lk)("span",null,"Markdown 转 PDF",-1)),(0,t.bF)(r,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,d.R1)(u.Document))]),_:1})])]),default:(0,t.k6)(()=>[(0,t.bF)(M,{model:m,"label-width":"120px"},{default:(0,t.k6)(()=>[(0,t.bF)(h,{label:"选择Markdown文件",required:""},{default:(0,t.k6)(()=>[(0,t.bF)(w,{ref_key:"uploadRef",ref:l,"auto-upload":!1,limit:1,"on-change":f,"before-upload":v,accept:".md",drag:""},{tip:(0,t.k6)(()=>[...o[5]||(o[5]=[(0,t.Lk)("div",{class:"el-upload__tip"},"只能上传 .md 文件，且不超过100MB",-1)])]),default:(0,t.k6)(()=>[(0,t.bF)(r,{class:"el-icon--upload"},{default:(0,t.k6)(()=>[(0,t.bF)((0,d.R1)(u.UploadFilled))]),_:1}),o[6]||(o[6]=(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)("将Markdown文件拖到此处，或"),(0,t.Lk)("em",null,"点击上传")],-1))]),_:1},512)]),_:1}),(0,t.bF)(h,{label:"主题样式"},{default:(0,t.k6)(()=>[(0,t.bF)(V,{modelValue:m.theme,"onUpdate:modelValue":o[0]||(o[0]=e=>m.theme=e)},{default:(0,t.k6)(()=>[(0,t.bF)(L,{label:"默认 (default)",value:"default"}),(0,t.bF)(L,{label:"GitHub",value:"github"}),(0,t.bF)(L,{label:"Modern",value:"modern"})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(h,{label:"纸张大小"},{default:(0,t.k6)(()=>[(0,t.bF)(V,{modelValue:m.pageSize,"onUpdate:modelValue":o[1]||(o[1]=e=>m.pageSize=e)},{default:(0,t.k6)(()=>[(0,t.bF)(L,{label:"A4",value:"A4"}),(0,t.bF)(L,{label:"Letter",value:"Letter"}),(0,t.bF)(L,{label:"Legal",value:"Legal"})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(h,{label:"方向"},{default:(0,t.k6)(()=>[(0,t.bF)(V,{modelValue:m.orientation,"onUpdate:modelValue":o[2]||(o[2]=e=>m.orientation=e)},{default:(0,t.k6)(()=>[(0,t.bF)(L,{label:"纵向 (portrait)",value:"portrait"}),(0,t.bF)(L,{label:"横向 (landscape)",value:"landscape"})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(h,{label:"页边距"},{default:(0,t.k6)(()=>[(0,t.bF)(y,{modelValue:m.margins,"onUpdate:modelValue":o[3]||(o[3]=e=>m.margins=e),placeholder:"left,top,right,bottom (pt)"},null,8,["modelValue"]),o[7]||(o[7]=(0,t.Lk)("div",{class:"form-tip"},"默认 36,36,36,36（单位：pt）",-1))]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(C,{type:"primary",loading:a.value,disabled:!b.value,onClick:F},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(a.value?"处理中...":"开始转换"),1)]),_:1},8,["loading","disabled"]),(0,t.bF)(C,{onClick:g},{default:(0,t.k6)(()=>[...o[8]||(o[8]=[(0,t.eW)("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),k.value?((0,t.uX)(),(0,t.CE)("div",c,[(0,t.bF)(R,null,{default:(0,t.k6)(()=>[...o[9]||(o[9]=[(0,t.eW)("处理结果",-1)])]),_:1}),(0,t.bF)(D,{title:k.value.msg,type:"success",closable:!1,"show-icon":""},null,8,["title"]),(0,t.Lk)("div",p,[(0,t.Lk)("p",null,[o[10]||(o[10]=(0,t.Lk)("strong",null,"任务ID:",-1)),(0,t.eW)(" "+(0,n.v_)(k.value.data.taskId),1)]),(0,t.Lk)("p",null,[o[11]||(o[11]=(0,t.Lk)("strong",null,"输出文件:",-1)),(0,t.eW)(" "+(0,n.v_)(k.value.data.convertedFile),1)]),(0,t.bF)(C,{type:"success",onClick:_},{default:(0,t.k6)(()=>[(0,t.bF)(r,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,d.R1)(u.Download))]),_:1}),o[12]||(o[12]=(0,t.eW)(" 下载PDF ",-1))]),_:1})])])):(0,t.Q3)("",!0)]),_:1})])}}},k=a(6262);const m=(0,k.A)(b,[["__scopeId","data-v-54cce230"]]);var f=m;const v={class:"markdown-to-pdf-page"};var F={__name:"MarkdownToPdf",setup(e){return(e,l)=>((0,t.uX)(),(0,t.CE)("div",v,[(0,t.bF)(f)]))}};const _=(0,k.A)(F,[["__scopeId","data-v-1fdc7777"]]);var g=_}}]);
//# sourceMappingURL=946.c93404d4.js.map