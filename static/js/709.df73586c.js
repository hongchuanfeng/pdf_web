"use strict";(self["webpackChunkpdf_image_web"]=self["webpackChunkpdf_image_web"]||[]).push([[709],{1322:function(e,l,a){function n(e){if(0===e)return"0 B";const l=1024,a=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(l));return parseFloat((e/Math.pow(l,n)).toFixed(2))+" "+a[n]}function t(e,l){const a="."+e.name.split(".").pop().toLowerCase();return l.includes(a)}function o(e,l=104857600){return e.size<=l}function u(e){return new Promise((l,a)=>{const n=new FileReader;n.onload=e=>l(e.target.result),n.onerror=a,n.readAsDataURL(e)})}a.d(l,{nJ:function(){return d},oz:function(){return u},v7:function(){return n}});const r={PDF:[".pdf"],IMAGE:[".jpg",".jpeg",".png",".bmp",".tiff"],WORD:[".doc",".docx"],EXCEL:[".xls",".xlsx"],POWERPOINT:[".ppt",".pptx"]};function d(e,l){const a=[];return t(e,r[l])||a.push(`文件类型不支持，请上传${r[l].join("、")}格式的文件`),o(e)||a.push("文件大小不能超过100MB"),{valid:0===a.length,errors:a}}},1709:function(e,l,a){a.r(l),a.d(l,{default:function(){return s}});var n=a(641),t=a(9919);const o={class:"image-mosaic-page"};var u={__name:"ImageRemoveMosaic",setup(e){return(e,l)=>((0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(t.A)]))}},r=a(6262);const d=(0,r.A)(u,[["__scopeId","data-v-616a3c23"]]);var s=d},9919:function(e,l,a){a.d(l,{A:function(){return _}});var n=a(641),t=a(953),o=a(33),u=a(163),r=a(8548),d=a(7196),s=a(1322);const c={class:"image-remove-mosaic"},i={class:"card-header"},p={class:"image-preview"},v=["src"],f={key:0,class:"result-section"},m={class:"result-info"};var k={__name:"ImageRemoveMosaic",setup(e){const l=(0,t.KR)(),a=(0,t.KR)(!1),k=(0,t.KR)(null),b=(0,t.KR)(""),g=(0,t.KR)(null),_=(0,t.Kh)({mosaicArea:"",enhancementLevel:"medium"}),F=async e=>{const a=(0,s.nJ)(e.raw,"IMAGE");if(!a.valid)return u.nk.error(a.errors[0]),void l.value.clearFiles();k.value=e.raw;try{b.value=await(0,s.oz)(e.raw)}catch(n){console.error("图片预览失败:",n)}},h=e=>{const l=(0,s.nJ)(e,"IMAGE");return l.valid||u.nk.error(l.errors[0]),!1},L=async()=>{if(k.value){a.value=!0;try{const e=new FormData;e.append("file",k.value),e.append("mosaicArea",_.mosaicArea),e.append("enhancementLevel",_.enhancementLevel);const l=await d.CL.removeMosaic(e);g.value=l,u.nk.success("图片去马赛克成功")}catch(e){console.error("图片去马赛克失败:",e)}finally{a.value=!1}}else u.nk.warning("请先选择图片文件")},w=()=>{if(g.value?.data?.downloadUrl){const e=document.createElement("a");e.href=g.value.data.downloadUrl,e.download=g.value.data.processedFile,e.click()}},y=()=>{_.mosaicArea="",_.enhancementLevel="medium",k.value=null,b.value="",g.value=null,l.value?.clearFiles()};return(e,u)=>{const d=(0,n.g2)("el-icon"),s=(0,n.g2)("el-upload"),R=(0,n.g2)("el-form-item"),A=(0,n.g2)("el-input"),M=(0,n.g2)("el-radio"),x=(0,n.g2)("el-radio-group"),W=(0,n.g2)("el-button"),C=(0,n.g2)("el-form"),I=(0,n.g2)("el-divider"),E=(0,n.g2)("el-alert"),B=(0,n.g2)("el-card");return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.bF)(B,{class:"box-card"},{header:(0,n.k6)(()=>[(0,n.Lk)("div",i,[u[2]||(u[2]=(0,n.Lk)("span",null,"图片去马赛克",-1)),(0,n.bF)(d,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,t.R1)(r.Picture))]),_:1})])]),default:(0,n.k6)(()=>[(0,n.bF)(C,{model:_,"label-width":"120px"},{default:(0,n.k6)(()=>[(0,n.bF)(R,{label:"选择图片文件",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(s,{ref_key:"uploadRef",ref:l,"auto-upload":!1,limit:1,"on-change":F,"before-upload":h,accept:".jpg,.jpeg,.png,.bmp,.tiff",drag:""},{tip:(0,n.k6)(()=>[...u[3]||(u[3]=[(0,n.Lk)("div",{class:"el-upload__tip"}," 支持JPG、PNG、BMP、TIFF格式，且不超过100MB ",-1)])]),default:(0,n.k6)(()=>[(0,n.bF)(d,{class:"el-icon--upload"},{default:(0,n.k6)(()=>[(0,n.bF)((0,t.R1)(r.UploadFilled))]),_:1}),u[4]||(u[4]=(0,n.Lk)("div",{class:"el-upload__text"},[(0,n.eW)(" 将图片文件拖到此处，或"),(0,n.Lk)("em",null,"点击上传")],-1))]),_:1},512)]),_:1}),b.value?((0,n.uX)(),(0,n.Wv)(R,{key:0,label:"图片预览"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",p,[(0,n.Lk)("img",{src:b.value,alt:"预览图片"},null,8,v)])]),_:1})):(0,n.Q3)("",!0),(0,n.bF)(R,{label:"马赛克区域"},{default:(0,n.k6)(()=>[(0,n.bF)(A,{modelValue:_.mosaicArea,"onUpdate:modelValue":u[0]||(u[0]=e=>_.mosaicArea=e),placeholder:"格式: x1,y1,x2,y2 (不填则自动检测)",clearable:""},null,8,["modelValue"]),u[5]||(u[5]=(0,n.Lk)("div",{class:"form-tip"},' 手动指定马赛克区域坐标，格式为"x1,y1,x2,y2"，不填则自动检测马赛克位置 ',-1))]),_:1}),(0,n.bF)(R,{label:"增强级别"},{default:(0,n.k6)(()=>[(0,n.bF)(x,{modelValue:_.enhancementLevel,"onUpdate:modelValue":u[1]||(u[1]=e=>_.enhancementLevel=e)},{default:(0,n.k6)(()=>[(0,n.bF)(M,{label:"low"},{default:(0,n.k6)(()=>[...u[6]||(u[6]=[(0,n.eW)("低",-1)])]),_:1}),(0,n.bF)(M,{label:"medium"},{default:(0,n.k6)(()=>[...u[7]||(u[7]=[(0,n.eW)("中",-1)])]),_:1}),(0,n.bF)(M,{label:"high"},{default:(0,n.k6)(()=>[...u[8]||(u[8]=[(0,n.eW)("高",-1)])]),_:1})]),_:1},8,["modelValue"]),u[9]||(u[9]=(0,n.Lk)("div",{class:"form-tip"}," 选择增强级别，级别越高处理效果越好但耗时更长 ",-1))]),_:1}),(0,n.bF)(R,null,{default:(0,n.k6)(()=>[(0,n.bF)(W,{type:"primary",loading:a.value,disabled:!k.value,onClick:L},{default:(0,n.k6)(()=>[(0,n.eW)((0,o.v_)(a.value?"处理中...":"开始去马赛克"),1)]),_:1},8,["loading","disabled"]),(0,n.bF)(W,{onClick:y},{default:(0,n.k6)(()=>[...u[10]||(u[10]=[(0,n.eW)("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),g.value?((0,n.uX)(),(0,n.CE)("div",f,[(0,n.bF)(I,null,{default:(0,n.k6)(()=>[...u[11]||(u[11]=[(0,n.eW)("处理结果",-1)])]),_:1}),(0,n.bF)(E,{title:g.value.msg,type:"success",closable:!1,"show-icon":""},null,8,["title"]),(0,n.Lk)("div",m,[(0,n.Lk)("p",null,[u[12]||(u[12]=(0,n.Lk)("strong",null,"任务ID:",-1)),(0,n.eW)(" "+(0,o.v_)(g.value.data.taskId),1)]),(0,n.Lk)("p",null,[u[13]||(u[13]=(0,n.Lk)("strong",null,"处理文件:",-1)),(0,n.eW)(" "+(0,o.v_)(g.value.data.processedFile),1)]),(0,n.bF)(W,{type:"success",onClick:w},{default:(0,n.k6)(()=>[(0,n.bF)(d,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,t.R1)(r.Download))]),_:1}),u[14]||(u[14]=(0,n.eW)(" 下载结果 ",-1))]),_:1})])])):(0,n.Q3)("",!0)]),_:1})])}}},b=a(6262);const g=(0,b.A)(k,[["__scopeId","data-v-5b049792"]]);var _=g}}]);
//# sourceMappingURL=709.df73586c.js.map