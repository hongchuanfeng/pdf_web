"use strict";(self["webpackChunkpdf_image_web"]=self["webpackChunkpdf_image_web"]||[]).push([[421],{1322:function(e,a,l){function t(e){if(0===e)return"0 B";const a=1024,l=["B","KB","MB","GB"],t=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,t)).toFixed(2))+" "+l[t]}function r(e,a){const l="."+e.name.split(".").pop().toLowerCase();return a.includes(l)}function n(e,a=104857600){return e.size<=a}function o(e){return new Promise((a,l)=>{const t=new FileReader;t.onload=e=>a(e.target.result),t.onerror=l,t.readAsDataURL(e)})}l.d(a,{nJ:function(){return d},oz:function(){return o},v7:function(){return t}});const u={PDF:[".pdf"],IMAGE:[".jpg",".jpeg",".png",".bmp",".tiff"],WORD:[".doc",".docx"],EXCEL:[".xls",".xlsx"],POWERPOINT:[".ppt",".pptx"]};function d(e,a){const l=[];return r(e,u[a])||l.push(`文件类型不支持，请上传${u[a].join("、")}格式的文件`),n(e)||l.push("文件大小不能超过100MB"),{valid:0===l.length,errors:l}}},3421:function(e,a,l){l.r(a),l.d(a,{default:function(){return i}});var t=l(641),r=l(7965);const n={class:"image-watermark-page"};var o={__name:"ImageRemoveWatermark",setup(e){return(e,a)=>((0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(r.A)]))}},u=l(6262);const d=(0,u.A)(o,[["__scopeId","data-v-e62d7862"]]);var i=d},7965:function(e,a,l){l.d(a,{A:function(){return _}});var t=l(641),r=l(953),n=l(33),o=l(163),u=l(8548),d=l(7196),i=l(1322);const s={class:"image-remove-watermark"},c={class:"card-header"},p={class:"image-preview"},k=["src"],f={key:0,class:"result-section"},v={class:"result-info"};var m={__name:"ImageRemoveWatermark",setup(e){const a=(0,r.KR)(),l=(0,r.KR)(!1),m=(0,r.KR)(null),g=(0,r.KR)(""),b=(0,r.KR)(null),_=(0,r.Kh)({watermarkArea:"",algorithm:"auto"}),F=async e=>{const l=(0,i.nJ)(e.raw,"IMAGE");if(!l.valid)return o.nk.error(l.errors[0]),void a.value.clearFiles();m.value=e.raw;try{g.value=await(0,i.oz)(e.raw)}catch(t){console.error("图片预览失败:",t)}},w=e=>{const a=(0,i.nJ)(e,"IMAGE");return a.valid||o.nk.error(a.errors[0]),!1},h=async()=>{if(m.value){l.value=!0;try{const e=new FormData;e.append("file",m.value),e.append("watermarkArea",_.watermarkArea),e.append("algorithm",_.algorithm);const a=await d.CL.removeWatermark(e);b.value=a,o.nk.success("图片去水印成功")}catch(e){console.error("图片去水印失败:",e)}finally{l.value=!1}}else o.nk.warning("请先选择图片文件")},L=()=>{if(b.value?.data?.downloadUrl){const e=document.createElement("a");e.href=b.value.data.downloadUrl,e.download=b.value.data.processedFile,e.click()}},y=()=>{_.watermarkArea="",_.algorithm="auto",m.value=null,g.value="",b.value=null,a.value?.clearFiles()};return(e,o)=>{const d=(0,t.g2)("el-icon"),i=(0,t.g2)("el-upload"),W=(0,t.g2)("el-form-item"),R=(0,t.g2)("el-input"),A=(0,t.g2)("el-radio"),x=(0,t.g2)("el-radio-group"),C=(0,t.g2)("el-button"),I=(0,t.g2)("el-form"),M=(0,t.g2)("el-divider"),E=(0,t.g2)("el-alert"),B=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",s,[(0,t.bF)(B,{class:"box-card"},{header:(0,t.k6)(()=>[(0,t.Lk)("div",c,[o[2]||(o[2]=(0,t.Lk)("span",null,"图片去水印",-1)),(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,r.R1)(u.Picture))]),_:1})])]),default:(0,t.k6)(()=>[(0,t.bF)(I,{model:_,"label-width":"120px"},{default:(0,t.k6)(()=>[(0,t.bF)(W,{label:"选择图片文件",required:""},{default:(0,t.k6)(()=>[(0,t.bF)(i,{ref_key:"uploadRef",ref:a,"auto-upload":!1,limit:1,"on-change":F,"before-upload":w,accept:".jpg,.jpeg,.png,.bmp,.tiff",drag:""},{tip:(0,t.k6)(()=>[...o[3]||(o[3]=[(0,t.Lk)("div",{class:"el-upload__tip"}," 支持JPG、PNG、BMP、TIFF格式，且不超过100MB ",-1)])]),default:(0,t.k6)(()=>[(0,t.bF)(d,{class:"el-icon--upload"},{default:(0,t.k6)(()=>[(0,t.bF)((0,r.R1)(u.UploadFilled))]),_:1}),o[4]||(o[4]=(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)(" 将图片文件拖到此处，或"),(0,t.Lk)("em",null,"点击上传")],-1))]),_:1},512)]),_:1}),g.value?((0,t.uX)(),(0,t.Wv)(W,{key:0,label:"图片预览"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",p,[(0,t.Lk)("img",{src:g.value,alt:"预览图片"},null,8,k)])]),_:1})):(0,t.Q3)("",!0),(0,t.bF)(W,{label:"水印区域"},{default:(0,t.k6)(()=>[(0,t.bF)(R,{modelValue:_.watermarkArea,"onUpdate:modelValue":o[0]||(o[0]=e=>_.watermarkArea=e),placeholder:"格式: x1,y1,x2,y2 (不填则自动检测)",clearable:""},null,8,["modelValue"]),o[5]||(o[5]=(0,t.Lk)("div",{class:"form-tip"},' 手动指定水印区域坐标，格式为"x1,y1,x2,y2"，不填则自动检测水印位置 ',-1))]),_:1}),(0,t.bF)(W,{label:"去水印算法"},{default:(0,t.k6)(()=>[(0,t.bF)(x,{modelValue:_.algorithm,"onUpdate:modelValue":o[1]||(o[1]=e=>_.algorithm=e)},{default:(0,t.k6)(()=>[(0,t.bF)(A,{label:"auto"},{default:(0,t.k6)(()=>[...o[6]||(o[6]=[(0,t.eW)("自动选择",-1)])]),_:1}),(0,t.bF)(A,{label:"inpainting"},{default:(0,t.k6)(()=>[...o[7]||(o[7]=[(0,t.eW)("修复算法",-1)])]),_:1}),(0,t.bF)(A,{label:"cloning"},{default:(0,t.k6)(()=>[...o[8]||(o[8]=[(0,t.eW)("克隆算法",-1)])]),_:1})]),_:1},8,["modelValue"]),o[9]||(o[9]=(0,t.Lk)("div",{class:"form-tip"}," 选择最适合的去水印算法，自动选择会根据图片特征自动选择最佳算法 ",-1))]),_:1}),(0,t.bF)(W,null,{default:(0,t.k6)(()=>[(0,t.bF)(C,{type:"primary",loading:l.value,disabled:!m.value,onClick:h},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(l.value?"处理中...":"开始去水印"),1)]),_:1},8,["loading","disabled"]),(0,t.bF)(C,{onClick:y},{default:(0,t.k6)(()=>[...o[10]||(o[10]=[(0,t.eW)("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),b.value?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.bF)(M,null,{default:(0,t.k6)(()=>[...o[11]||(o[11]=[(0,t.eW)("处理结果",-1)])]),_:1}),(0,t.bF)(E,{title:b.value.msg,type:"success",closable:!1,"show-icon":""},null,8,["title"]),(0,t.Lk)("div",v,[(0,t.Lk)("p",null,[o[12]||(o[12]=(0,t.Lk)("strong",null,"任务ID:",-1)),(0,t.eW)(" "+(0,n.v_)(b.value.data.taskId),1)]),(0,t.Lk)("p",null,[o[13]||(o[13]=(0,t.Lk)("strong",null,"处理文件:",-1)),(0,t.eW)(" "+(0,n.v_)(b.value.data.processedFile),1)]),(0,t.bF)(C,{type:"success",onClick:L},{default:(0,t.k6)(()=>[(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,r.R1)(u.Download))]),_:1}),o[14]||(o[14]=(0,t.eW)(" 下载结果 ",-1))]),_:1})])])):(0,t.Q3)("",!0)]),_:1})])}}},g=l(6262);const b=(0,g.A)(m,[["__scopeId","data-v-24b8407e"]]);var _=b}}]);
//# sourceMappingURL=421.1be58fa9.js.map