"use strict";(self["webpackChunkpdf_image_web"]=self["webpackChunkpdf_image_web"]||[]).push([[479],{1322:function(l,e,a){function t(l){if(0===l)return"0 B";const e=1024,a=["B","KB","MB","GB"],t=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,t)).toFixed(2))+" "+a[t]}function u(l,e){const a="."+l.name.split(".").pop().toLowerCase();return e.includes(a)}function n(l,e=104857600){return l.size<=e}function o(l){return new Promise((e,a)=>{const t=new FileReader;t.onload=l=>e(l.target.result),t.onerror=a,t.readAsDataURL(l)})}a.d(e,{nJ:function(){return s},oz:function(){return o},v7:function(){return t}});const r={PDF:[".pdf"],IMAGE:[".jpg",".jpeg",".png",".bmp",".tiff"],WORD:[".doc",".docx"],EXCEL:[".xls",".xlsx"],POWERPOINT:[".ppt",".pptx"]};function s(l,e){const a=[];return u(l,r[e])||a.push(`文件类型不支持，请上传${r[e].join("、")}格式的文件`),n(l)||a.push("文件大小不能超过100MB"),{valid:0===a.length,errors:a}}},8479:function(l,e,a){a.r(e),a.d(e,{default:function(){return P}});var t=a(641),u=a(953),n=a(33),o=a(163),r=a(8548),s=a(7196),d=a(1322);const i={class:"pdf-split"},p={class:"card-header"},c={key:0,class:"result-section"},f={class:"result-info"};var F={__name:"PdfSplit",setup(l){const e=(0,u.KR)(),a=(0,u.KR)(!1),F=(0,u.KR)(null),k=(0,u.KR)(null),v=(0,u.Kh)({splitPages:"",outputFormat:"pdf"}),b=l=>{const a=(0,d.nJ)(l.raw,"PDF");if(!a.valid)return o.nk.error(a.errors[0]),void e.value.clearFiles();F.value=l.raw},g=l=>{const e=(0,d.nJ)(l,"PDF");return e.valid||o.nk.error(e.errors[0]),!1},_=async()=>{if(F.value){a.value=!0;try{const l=new FormData;l.append("file",F.value),l.append("splitPages",v.splitPages),l.append("outputFormat",v.outputFormat);const e=await s.DC.splitPdf(l);k.value=e,o.nk.success("PDF拆分成功")}catch(l){console.error("PDF拆分失败:",l)}finally{a.value=!1}}else o.nk.warning("请先选择PDF文件")},m=()=>{if(k.value?.data?.downloadUrl){const l=document.createElement("a");l.href=k.value.data.downloadUrl,l.download="split_files.zip",l.click()}},P=()=>{v.splitPages="",v.outputFormat="pdf",F.value=null,k.value=null,e.value?.clearFiles()};return(l,o)=>{const s=(0,t.g2)("el-icon"),d=(0,t.g2)("el-upload"),h=(0,t.g2)("el-form-item"),w=(0,t.g2)("el-input"),D=(0,t.g2)("el-option"),L=(0,t.g2)("el-select"),C=(0,t.g2)("el-button"),R=(0,t.g2)("el-form"),y=(0,t.g2)("el-divider"),E=(0,t.g2)("el-alert"),x=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(x,{class:"box-card"},{header:(0,t.k6)(()=>[(0,t.Lk)("div",p,[o[2]||(o[2]=(0,t.Lk)("span",null,"PDF拆分",-1)),(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,u.R1)(r.Document))]),_:1})])]),default:(0,t.k6)(()=>[(0,t.bF)(R,{model:v,"label-width":"120px"},{default:(0,t.k6)(()=>[(0,t.bF)(h,{label:"选择PDF文件",required:""},{default:(0,t.k6)(()=>[(0,t.bF)(d,{ref_key:"uploadRef",ref:e,"auto-upload":!1,limit:1,"on-change":b,"before-upload":g,accept:".pdf",drag:""},{tip:(0,t.k6)(()=>[...o[3]||(o[3]=[(0,t.Lk)("div",{class:"el-upload__tip"}," 只能上传PDF文件，且不超过100MB ",-1)])]),default:(0,t.k6)(()=>[(0,t.bF)(s,{class:"el-icon--upload"},{default:(0,t.k6)(()=>[(0,t.bF)((0,u.R1)(r.UploadFilled))]),_:1}),o[4]||(o[4]=(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)(" 将PDF文件拖到此处，或"),(0,t.Lk)("em",null,"点击上传")],-1))]),_:1},512)]),_:1}),(0,t.bF)(h,{label:"拆分页数"},{default:(0,t.k6)(()=>[(0,t.bF)(w,{modelValue:v.splitPages,"onUpdate:modelValue":o[0]||(o[0]=l=>v.splitPages=l),placeholder:"格式如: 1-5,10-15 (不填则按页拆分)",clearable:""},null,8,["modelValue"]),o[5]||(o[5]=(0,t.Lk)("div",{class:"form-tip"}," 支持范围格式，如：1-5,10-15，不填则每页单独拆分 ",-1))]),_:1}),(0,t.bF)(h,{label:"输出格式"},{default:(0,t.k6)(()=>[(0,t.bF)(L,{modelValue:v.outputFormat,"onUpdate:modelValue":o[1]||(o[1]=l=>v.outputFormat=l),placeholder:"选择输出格式"},{default:(0,t.k6)(()=>[(0,t.bF)(D,{label:"PDF",value:"pdf"})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(h,null,{default:(0,t.k6)(()=>[(0,t.bF)(C,{type:"primary",loading:a.value,disabled:!F.value,onClick:_},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(a.value?"处理中...":"开始拆分"),1)]),_:1},8,["loading","disabled"]),(0,t.bF)(C,{onClick:P},{default:(0,t.k6)(()=>[...o[6]||(o[6]=[(0,t.eW)("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),k.value?((0,t.uX)(),(0,t.CE)("div",c,[(0,t.bF)(y,null,{default:(0,t.k6)(()=>[...o[7]||(o[7]=[(0,t.eW)("处理结果",-1)])]),_:1}),(0,t.bF)(E,{title:k.value.msg,type:"success",closable:!1,"show-icon":""},null,8,["title"]),(0,t.Lk)("div",f,[(0,t.Lk)("p",null,[o[8]||(o[8]=(0,t.Lk)("strong",null,"任务ID:",-1)),(0,t.eW)(" "+(0,n.v_)(k.value.data.taskId),1)]),(0,t.Lk)("p",null,[o[9]||(o[9]=(0,t.Lk)("strong",null,"拆分文件数:",-1)),(0,t.eW)(" "+(0,n.v_)(k.value.data.splitFiles.length),1)]),o[11]||(o[11]=(0,t.Lk)("p",null,[(0,t.Lk)("strong",null,"拆分文件:")],-1)),(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(k.value.data.splitFiles,l=>((0,t.uX)(),(0,t.CE)("li",{key:l},(0,n.v_)(l),1))),128))]),(0,t.bF)(C,{type:"success",onClick:m},{default:(0,t.k6)(()=>[(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,u.R1)(r.Download))]),_:1}),o[10]||(o[10]=(0,t.eW)(" 下载结果 ",-1))]),_:1})])])):(0,t.Q3)("",!0)]),_:1})])}}},k=a(6262);const v=(0,k.A)(F,[["__scopeId","data-v-bb6ea26e"]]);var b=v;const g={class:"pdf-split-page"};var _={__name:"PdfSplit",setup(l){return(l,e)=>((0,t.uX)(),(0,t.CE)("div",g,[(0,t.bF)(b)]))}};const m=(0,k.A)(_,[["__scopeId","data-v-1812f4fb"]]);var P=m}}]);
//# sourceMappingURL=479.75efa277.js.map