"use strict";(self["webpackChunkpdf_image_web"]=self["webpackChunkpdf_image_web"]||[]).push([[568],{784:function(e,l,t){t.r(l),t.d(l,{downloadFile:function(){return o},getApiBaseUrl:function(){return n},getDownloadUrl:function(){return a}});const a=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:window.APP_CONFIG&&window.APP_CONFIG.API_FULL_URL?`${window.APP_CONFIG.API_FULL_URL}${e}`:`https://api.openai2025.com${e}`:"",o=(e,l="")=>{if(!e)return void console.error("Download URL is required");const t=a(e);try{const e=document.createElement("a");e.href=t,e.target="_blank",l&&(e.download=l),document.body.appendChild(e),e.click(),document.body.removeChild(e),console.log("Download started:",t)}catch(o){throw console.error("Download failed:",o),o}},n=()=>window.APP_CONFIG&&window.APP_CONFIG.API_FULL_URL?window.APP_CONFIG.API_FULL_URL:"https://api.openai2025.com"},1322:function(e,l,t){function a(e){if(0===e)return"0 B";const l=1024,t=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(l));return parseFloat((e/Math.pow(l,a)).toFixed(2))+" "+t[a]}function o(e,l){const t="."+e.name.split(".").pop().toLowerCase();return l.includes(t)}function n(e,l=104857600){return e.size<=l}function u(e){return new Promise((l,t)=>{const a=new FileReader;a.onload=e=>l(e.target.result),a.onerror=t,a.readAsDataURL(e)})}t.d(l,{nJ:function(){return d},oz:function(){return u},v7:function(){return a}});const r={PDF:[".pdf"],IMAGE:[".jpg",".jpeg",".png",".bmp",".tiff"],WORD:[".doc",".docx"],EXCEL:[".xls",".xlsx"],POWERPOINT:[".ppt",".pptx"]};function d(e,l){const t=[];return o(e,r[l])||t.push(`文件类型不支持，请上传${r[l].join("、")}格式的文件`),n(e)||t.push("文件大小不能超过100MB"),{valid:0===t.length,errors:t}}},5568:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(641),o=t(953),n=t(33),u=t(163),r=t(8548),d=t(7196),s=t(1322),i=t(784);const c={class:"pdf-split"},p={class:"card-header"},f={key:0,class:"result-section"},F={class:"result-info"};var _={__name:"PdfSplit",setup(e){const l=(0,o.KR)(),t=(0,o.KR)(!1),_=(0,o.KR)(null),k=(0,o.KR)(null),v=(0,o.Kh)({splitPages:"",outputFormat:"pdf"}),b=e=>{const t=(0,s.nJ)(e.raw,"PDF");if(!t.valid)return u.nk.error(t.errors[0]),void l.value.clearFiles();_.value=e.raw},g=e=>{const l=(0,s.nJ)(e,"PDF");return l.valid||u.nk.error(l.errors[0]),!1},w=async()=>{if(_.value){t.value=!0;try{const e=new FormData;e.append("file",_.value),e.append("splitPages",v.splitPages),e.append("outputFormat",v.outputFormat);const l=await d.DC.splitPdf(e);k.value=l,u.nk.success("PDF拆分成功")}catch(e){console.error("PDF拆分失败:",e)}finally{t.value=!1}}else u.nk.warning("请先选择PDF文件")},P=()=>{if(k.value?.data?.downloadUrl)try{const e="split_files.zip";(0,i.downloadFile)(k.value.data.downloadUrl,e),u.nk.success("下载已开始")}catch(e){console.error("下载失败:",e),u.nk.error("下载失败，请重试")}else u.nk.warning("没有可下载的文件")},m=()=>{v.splitPages="",v.outputFormat="pdf",_.value=null,k.value=null,l.value?.clearFiles()};return(e,u)=>{const d=(0,a.g2)("el-icon"),s=(0,a.g2)("el-upload"),i=(0,a.g2)("el-form-item"),h=(0,a.g2)("el-input"),L=(0,a.g2)("el-option"),D=(0,a.g2)("el-select"),C=(0,a.g2)("el-button"),I=(0,a.g2)("el-form"),R=(0,a.g2)("el-divider"),U=(0,a.g2)("el-alert"),A=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.CE)("div",c,[(0,a.bF)(A,{class:"box-card"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",p,[u[2]||(u[2]=(0,a.Lk)("span",null,"PDF拆分",-1)),(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(r.Document))]),_:1})])]),default:(0,a.k6)(()=>[(0,a.bF)(I,{model:v,"label-width":"120px"},{default:(0,a.k6)(()=>[(0,a.bF)(i,{label:"选择PDF文件",required:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{ref_key:"uploadRef",ref:l,"auto-upload":!1,limit:1,"on-change":b,"before-upload":g,accept:".pdf",drag:""},{tip:(0,a.k6)(()=>[...u[3]||(u[3]=[(0,a.Lk)("div",{class:"el-upload__tip"}," 只能上传PDF文件，且不超过100MB ",-1)])]),default:(0,a.k6)(()=>[(0,a.bF)(d,{class:"el-icon--upload"},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(r.UploadFilled))]),_:1}),u[4]||(u[4]=(0,a.Lk)("div",{class:"el-upload__text"},[(0,a.eW)(" 将PDF文件拖到此处，或"),(0,a.Lk)("em",null,"点击上传")],-1))]),_:1},512)]),_:1}),(0,a.bF)(i,{label:"拆分页数"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{modelValue:v.splitPages,"onUpdate:modelValue":u[0]||(u[0]=e=>v.splitPages=e),placeholder:"格式如: 1-5,10-15 (不填则按页拆分)",clearable:""},null,8,["modelValue"]),u[5]||(u[5]=(0,a.Lk)("div",{class:"form-tip"}," 支持范围格式，如：1-5,10-15，不填则每页单独拆分 ",-1))]),_:1}),(0,a.bF)(i,{label:"输出格式"},{default:(0,a.k6)(()=>[(0,a.bF)(D,{modelValue:v.outputFormat,"onUpdate:modelValue":u[1]||(u[1]=e=>v.outputFormat=e),placeholder:"选择输出格式"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{label:"PDF",value:"pdf"})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(i,null,{default:(0,a.k6)(()=>[(0,a.bF)(C,{type:"primary",loading:t.value,disabled:!_.value,onClick:w},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(t.value?"处理中...":"开始拆分"),1)]),_:1},8,["loading","disabled"]),(0,a.bF)(C,{onClick:m},{default:(0,a.k6)(()=>[...u[6]||(u[6]=[(0,a.eW)("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),k.value?((0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(R,null,{default:(0,a.k6)(()=>[...u[7]||(u[7]=[(0,a.eW)("处理结果",-1)])]),_:1}),(0,a.bF)(U,{title:k.value.msg,type:"success",closable:!1,"show-icon":""},null,8,["title"]),(0,a.Lk)("div",F,[(0,a.Lk)("p",null,[u[8]||(u[8]=(0,a.Lk)("strong",null,"任务ID:",-1)),(0,a.eW)(" "+(0,n.v_)(k.value.data.taskId),1)]),(0,a.Lk)("p",null,[u[9]||(u[9]=(0,a.Lk)("strong",null,"拆分文件数:",-1)),(0,a.eW)(" "+(0,n.v_)(k.value.data.splitFiles.length),1)]),u[11]||(u[11]=(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,"拆分文件:")],-1)),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(k.value.data.splitFiles,e=>((0,a.uX)(),(0,a.CE)("li",{key:e},(0,n.v_)(e),1))),128))]),(0,a.bF)(C,{type:"success",onClick:P},{default:(0,a.k6)(()=>[(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(r.Download))]),_:1}),u[10]||(u[10]=(0,a.eW)(" 下载结果 ",-1))]),_:1})])])):(0,a.Q3)("",!0)]),_:1})])}}},k=t(6262);const v=(0,k.A)(_,[["__scopeId","data-v-faf6c548"]]);var b=v;const g={class:"pdf-split-page"};var w={__name:"PdfSplit",setup(e){return(e,l)=>((0,a.uX)(),(0,a.CE)("div",g,[(0,a.bF)(b)]))}};const P=(0,k.A)(w,[["__scopeId","data-v-1812f4fb"]]);var m=P}}]);
//# sourceMappingURL=568.7186fe1e.js.map